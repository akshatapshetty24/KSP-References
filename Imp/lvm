ğŸ“– What is LVM?
LVM (Logical Volume Manager) is a flexible, advanced disk management system for Linux.
Instead of directly creating partitions on physical disks, LVM allows you to group disks together into a storage pool 
(Volume Group), and then carve out Logical Volumes (LVs) from that pool.

ğŸ“Œ Why Do We Need LVM?
âœ… Without LVM	                        âœ… With LVM
Static, fixed partitions.	              Flexible, resizable logical volumes.
Hard to resize partitions.	            Easily extend or reduce LV sizes.
No easy way to combine multiple disks.	Combine multiple disks into one storage pool (VG).
No snapshot support.	                  Can take live snapshots for backup.
Tedious disk management.	              Simplified disk and storage management.

ğŸ“¦ Key Benefits:
ğŸ“ˆ Dynamic resizing: Increase or decrease LV sizes as needed.
ğŸ’¾ Disk pooling: Merge multiple physical disks into a single storage unit.
ğŸ”’ Snapshots: Create point-in-time copies for backup/testing.
ğŸ–¥ï¸ Easier management: No downtime needed for most resizing operations.


ğŸ“– LVM Commands: Create and Extend Logical Volumes

ğŸ“¦ 1ï¸âƒ£ Create a Physical Volume (PV)
pvcreate /dev/sdb
ğŸ‘‰ Check status:
pvs

ğŸ“¦ 2ï¸âƒ£ Create a Volume Group (VG)
vgcreate vg_data /dev/sdb
ğŸ‘‰ Check status:
vgs

ğŸ“¦ 3ï¸âƒ£ Create a Logical Volume (LV)
Example: 5G logical volume named lv_files inside vg_data
lvcreate -L 5G -n lv_files vg_data
ğŸ‘‰ Verify:
lvs

ğŸ“¦ 4ï¸âƒ£ Format the Logical Volume
Example: ext4 filesystem
mkfs.ext4 /dev/vg_data/lv_files

ğŸ“¦ 5ï¸âƒ£ Mount the Logical Volume
Create a mount point and mount it:
mkdir /mnt/files
mount /dev/vg_data/lv_files /mnt/files
ğŸ‘‰ Check mount:
Edit
df -hT

ğŸ“¦ 6ï¸âƒ£ Extend an Existing Logical Volume
ğŸ‘‰ Increase LV size by +6G:
lvextend -L +6G /dev/vg_data/lv_files
OR extend to total 20G:
lvextend -L 20G /dev/vg_data/lv_files
AND expand the filesystem:
ext4/xfs (RHEL 7/8/9)

ğŸ‘‰ For ext4:
resize2fs /dev/vg_data/lv_files

ğŸ‘‰ For xfs:
xfs_growfs /mnt/files
ğŸ“– Bonus: Resize with -r (Auto Filesystem Resize)
ğŸ‘‰ Single command (for ext4/xfs):
lvextend -r -L +6G /dev/vg_data/lv_files

ğŸ“¦ 7ï¸âƒ£ Check Final Size
lvdisplay /dev/vg_data/lv_files
df -hT

ğŸ”¥ Awesome â€” reducing a logical volume (LV) in LVM is a bit risky compared to extending, because you need to shrink the filesystem before reducing the LV size to avoid data loss.
Letâ€™s carefully list those steps clearly.

ğŸ“– Full Steps to Decrease a Logical Volume (with care)
âš ï¸ Important:
Back up data before proceeding â€” shrink operations are destructive if mishandled.

ğŸ“¦ 1ï¸âƒ£ Check Current LV and Filesystem Size
lvdisplay /dev/vg_data/lv_files
df -hT /mnt/files

ğŸ“¦ 2ï¸âƒ£ Unmount the Logical Volume
umount /mnt/files
ğŸ‘‰ Verify itâ€™s unmounted:
df -hT

ğŸ“¦ 3ï¸âƒ£ Run Filesystem Check
You must check and fix filesystem errors before resizing.
ğŸ‘‰ For ext4:
e2fsck -f /dev/vg_data/lv_files
ğŸ‘‰ For xfs (cannot shrink directly â€” needs backup/restore method)

ğŸ“¦ 4ï¸âƒ£ Resize Filesystem
ğŸ‘‰ For ext4:
To shrink to 8G
resize2fs /dev/vg_data/lv_files 8G

ğŸ“¦ 5ï¸âƒ£ Reduce the Logical Volume
Now reduce the LV to match the filesystem size you set above.
ğŸ‘‰ Example: reduce LV to 8G
lvreduce -L 8G /dev/vg_data/lv_files
ğŸ‘‰ Confirm with:
lvdisplay /dev/vg_data/lv_files

ğŸ“¦ 6ï¸âƒ£ Remount the LV
mount /dev/vg_data/lv_files /mnt/files
ğŸ‘‰ Verify:
df -hT /mnt/files

ğŸ“¦ Notes on XFS:
XFS doesnâ€™t support online or offline shrinking
Only way is to:
Backup data
Unmount
Remove and recreate LV with smaller size
Format as XFS
Restore data
